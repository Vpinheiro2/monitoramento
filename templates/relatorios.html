{% extends "base.html" %}
{% block title %}RelatÃ³rios{% endblock %}
{% block content %}
<div class="page-header">
    <h1 class="page-title">ðŸ“Š RelatÃ³rios</h1>
</div>
<div class="grid grid-2">
    {% for id, rel in relatorios.items() %}
    {% if rel.ativo %}
    <div class="card" style="margin: 0;">
        <h3 style="color: var(--primary);">{{ rel.nome }}</h3>
        <p style="color: #64748b;">{{ rel.descricao }}</p>
        <button onclick="abrirModal('{{ id }}')" class="btn btn-primary" style="width: 100%;">ðŸ“Š Gerar</button>
    </div>
    {% endif %}
    {% endfor %}
</div>
<div id="modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;">
    <div style="background: white; padding: 2rem; border-radius: 12px; max-width: 600px; width: 90%;">
        <h2>Gerar RelatÃ³rio</h2>
        <form method="POST" action="{{ url_for('gerar_relatorio') }}">
            <input type="hidden" name="id_relatorio" id="id_rel">
            <div class="form-group"><label class="form-label">Data InÃ­cio</label><input type="date" name="filtro_data_inicio" class="form-control"></div>
            <div class="form-group"><label class="form-label">Data Fim</label><input type="date" name="filtro_data_fim" class="form-control"></div>
            <div class="form-group"><label class="form-label">Formato</label><select name="formato" class="form-control" required><option value="excel">Excel</option><option value="pdf">PDF</option></select></div>
            <div style="display: flex; gap: 1rem;"><button type="button" onclick="fecharModal()" class="btn btn-secondary">Cancelar</button><button type="submit" class="btn btn-success">Gerar</button></div>
        </form>
    </div>
</div>
<script>
function abrirModal(id) { document.getElementById('id_rel').value = id; document.getElementById('modal').style.display = 'flex'; }
function fecharModal() { document.getElementById('modal').style.display = 'none'; }
</script>
{% endblock %}